import{i as P,d as M,T as $,j,k as B,c as L,w as c,u as t,o as m,a as e,g as f,t as s,b as p,m as _,l as R,e as u,f as w,F as U,h as O,n as W,v as A,x as E,y as S}from"./app-DvcEWBb-.js";import{_ as I}from"./Button-C8m032_K.js";import{_ as q}from"./AppLayout-BuCQ6WFQ.js";import{_ as z,a as Y}from"./SearchFilter-SpN_1X05.js";import{S as G,_ as H}from"./SelectInput-Dachf9ko.js";import{_ as J}from"./DialogModal-CF240EeB.js";import{_ as K}from"./DangerButton-71d8Iw8G.js";import{_ as Q}from"./SecondaryButton-DsJqz4h9.js";import"./LoadingButton-BDuquHI2.js";import"./Modal-B8qV30f2.js";import"./Button-CqSGXcNL.js";import"./Label-Vj9Pqrhi.js";import"./InputError-CKMLs-tu.js";import"./v4-CQkTLCs1.js";const X={class:"py-8"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ee={class:"bg-white dark:bg-gray-900 shadow sm:rounded-lg"},te={class:"sm:rounded-lg"},se={class:"p-6 sm:rounded-t-lg border-b border-gray-200 dark:border-gray-700 block md:flex md:items-center md:justify-between"},oe={class:"text-2xl"},ae={class:"text-base"},le={class:"mt-1 text-gray-500 dark:text-gray-400"},re={class:"mt-4 sm:mt-0 block sm:flex sm:items-center sm:gap-4"},de={class:"block"},ne={value:null},ie={value:"with"},ce={value:"only"},me={class:"bg-gray-50 dark:bg-black/50 border-b dark:border-gray-700 sm:rounded-b-lg"},pe={key:0},ue={class:"flex flex-col"},he={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},_e={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},fe={class:"relative overflow-hidden ring-1 ring-black ring-opacity-5"},xe={key:0,class:"absolute top-0 left-12 flex h-12 items-center space-x-3 sm:left-16"},ge={key:0,class:"mt-2 text-red-500"},ye={class:"min-w-full table-fixed divide-y divide-gray-300 dark:divide-gray-700"},be={class:"bg-gray-50 dark:bg-black/50"},we={scope:"col",class:"relative w-12 px-6 sm:w-16 sm:px-8"},ke=["indeterminate","checked"],ve={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ce={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},$e={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Se={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Te={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ve={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Fe={scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Ne={class:"sr-only"},De={class:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900"},Pe={class:"relative w-12 px-6 sm:w-16 sm:px-8"},Me={key:0,class:"absolute inset-y-0 left-0 w-0.5 bg-blue-600"},je=["value"],Be={class:"whitespace-nowrap px-3 py-4 text-sm font-medium"},Le={class:"whitespace-nowrap px-3 py-4 text-sm"},Re={class:"whitespace-nowrap px-3 py-4 text-sm"},Ue={class:"whitespace-nowrap px-3 py-4 text-sm"},Oe={class:"whitespace-nowrap px-3 py-4 text-sm"},We={class:"whitespace-nowrap px-3 py-4 text-sm"},Ae={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 w-20"},Ee={key:1,class:"py-4 px-6"},ot={__name:"List",props:["customers"],setup(T){const{t:a}=P({}),x=M(!1),n=T,r=$({selection:[],force:!1}),i=$({search:"",trashed:null}),k=j(()=>r.selection.length>0&&r.selection.length<n.customers.data.length);B(()=>{const d=window.location.search,l=new URLSearchParams(d);i.trashed=l.has("trashed")?l.get("trashed"):null});const V=(d,l=!1)=>{S.delete(_("customers.destroy"+(l?".permanently":""),d))},F=d=>{S.put(_("customers.restore",d))},v=()=>{x.value=!1},C=d=>{r.force=d||!1,x.value=!0},N=d=>{r.delete(_("customers.destroy.many"),{onSuccess:()=>{r.reset()},onFinish:()=>{x.value=!1}})},y=()=>{i.transform(d=>{let l={...d,remember:d.remember?"on":""};return Object.entries(l).reduce((h,[g,o])=>(o&&(h[g]=o),h),{})}).get(_("customers.index"),{preserveState:!0})},D=()=>{i.search="",i.trashed=null,y()};return(d,l)=>(m(),L(q,{title:t(a)("List Customers")},{default:c(()=>{var h,g;return[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",null,[e("div",oe,[f(s(t(a)("Customers"))+" ",1),e("span",ae,s({with:"("+t(a)("With Trashed")+")",only:"("+t(a)("Only Trashed")+")"}[t(i).trashed]),1)]),e("div",le,s(t(a)("Please review the result below")),1)]),e("div",re,[p(I,{href:t(_)("customers.create")},{default:c(()=>[f(s(t(a)("Add New Customer")),1)]),_:1},8,["href"]),e("form",{onSubmit:R(y,["prevent"])},[p(z,{onReset:l[2]||(l[2]=o=>D()),modelValue:t(i).search,"onUpdate:modelValue":l[3]||(l[3]=o=>t(i).search=o)},{default:c(()=>[e("label",de,s(t(a)("Trashed"))+":",1),p(G,{modelValue:t(i).trashed,"onUpdate:modelValue":l[0]||(l[0]=o=>t(i).trashed=o),onChange:l[1]||(l[1]=o=>y()),class:"mt-1 w-full"},{default:c(()=>[e("option",ne,s(t(a)("Not Trashed")),1),e("option",ie,s(t(a)("With Trashed")),1),e("option",ce,s(t(a)("Only Trashed")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],32)])]),e("div",me,[n.customers&&n.customers.data&&n.customers.data.length?(m(),u("div",pe,[e("div",ue,[e("div",he,[e("div",_e,[e("div",fe,[t(r).selection&&t(r).selection.length?(m(),u("div",xe,[e("button",{type:"button",onClick:l[4]||(l[4]=o=>C()),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},s(t(a)("Move to Trash")),1),e("button",{type:"button",onClick:l[5]||(l[5]=o=>C(!0)),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},s(t(a)("Delete Permanently")),1),p(J,{show:x.value,onClose:v,maxWidth:"sm"},{title:c(()=>[f(s(t(a)("Delete bulk records")),1)]),content:c(()=>[e("p",null,s(t(a)("Please confirm that you would like to delete the records?")),1),t(r).force?(m(),u("p",ge,s(t(a)("This action will delete the data permanently.")),1)):w("",!0)]),footer:c(()=>[p(Q,{onClick:v},{default:c(()=>[f(s(t(a)("Cancel")),1)]),_:1}),p(K,{onClick:l[6]||(l[6]=o=>N())},{default:c(()=>[f(s(t(a)("Yes, delete")),1)]),_:1})]),_:1},8,["show"])])):w("",!0),e("table",ye,[e("thead",be,[e("tr",null,[e("th",we,[e("input",{type:"checkbox",indeterminate:k.value,checked:k.value||t(r).selection.length===n.customers.data.length,onChange:l[7]||(l[7]=o=>t(r).selection=o.target.checked?n.customers.data.map(b=>b.id):[]),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,40,ke)]),e("th",ve,s(t(a)("Name")),1),e("th",Ce,s(t(a)("Company")),1),e("th",$e,s(t(a)("Email")),1),e("th",Se,s(t(a)("Phone")),1),e("th",Te,s(t(a)(((h=d.$settings)==null?void 0:h.customer_cf1)||"Custom Field 1")),1),e("th",Ve,s(t(a)(((g=d.$settings)==null?void 0:g.customer_cf2)||"Custom Field 2")),1),e("th",Fe,[e("span",Ne,s(t(a)("Actions")),1)])])]),e("tbody",De,[(m(!0),u(U,null,O(n.customers.data,o=>(m(),u("tr",{key:o.id,class:W([t(r).selection.includes(o.id)&&"bg-gray-50 dark:bg-gray-800/50",o.deleted_at&&"bg-red-100 dark:bg-red-900"])},[e("td",Pe,[t(r).selection.includes(o.id)?(m(),u("div",Me)):w("",!0),A(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":l[8]||(l[8]=b=>t(r).selection=b),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,8,je),[[E,t(r).selection]])]),e("td",Be,s(o.name),1),e("td",Le,s(o.company),1),e("td",Re,s(o.email),1),e("td",Ue,s(o.phone),1),e("td",Oe,s(o.cf1),1),e("td",We,s(o.cf2),1),e("td",Ae,[p(H,{pm:"customers",property:"name",row:o,deleteFn:V,restoreFn:F,editStr:t(_)("customers.edit",o.id)},null,8,["row","editStr"])])],2))),128))])])])])]),p(Y,{class:"m-4",meta:n.customers.meta,links:n.customers.links},null,8,["meta","links"])])])):(m(),u("div",Ee,s(t(a)("There is no data to display.")),1))])])])])])]}),_:1},8,["title"]))}};export{ot as default};
