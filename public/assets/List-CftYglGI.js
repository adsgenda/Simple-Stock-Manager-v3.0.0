import{p as F,o as r,e as u,c as w,i as M,d as P,T as C,j as z,k as I,w as p,u as e,a as t,g as _,t as a,b as m,m as f,l as L,h as S,F as T,f as y,n as E,v as O,x as W,y as N}from"./app-DvcEWBb-.js";import{_ as q}from"./Button-C8m032_K.js";import{_ as Y}from"./AppLayout-BuCQ6WFQ.js";import{_ as G,a as H}from"./SearchFilter-SpN_1X05.js";import{S as U,_ as J}from"./SelectInput-Dachf9ko.js";import{_ as K}from"./DialogModal-CF240EeB.js";import{_ as Q}from"./DangerButton-71d8Iw8G.js";import{_ as X}from"./SecondaryButton-DsJqz4h9.js";import"./LoadingButton-BDuquHI2.js";import"./Modal-B8qV30f2.js";import"./Button-CqSGXcNL.js";import"./Label-Vj9Pqrhi.js";import"./InputError-CKMLs-tu.js";import"./v4-CQkTLCs1.js";const D={__name:"Boolean",props:["value"],setup(b){return(l,x)=>{const c=F("Icons");return r(),u("span",null,[b.value?(r(),w(c,{key:0,name:"tick",size:"w-4 h-4 text-green-500"})):(r(),w(c,{key:1,name:"cross",size:"w-4 h-4 text-red-500"}))])}}},Z={class:"py-8"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"bg-white dark:bg-gray-900 shadow sm:rounded-lg"},se={class:"sm:rounded-lg"},oe={class:"p-6 sm:rounded-t-lg border-b border-gray-200 dark:border-gray-700 block md:flex md:items-center md:justify-between"},le={class:"text-2xl"},ae={class:"text-base"},re={class:"mt-1 text-gray-500 dark:text-gray-400"},ne={class:"mt-4 sm:mt-0 block sm:flex sm:items-center sm:gap-4"},de={class:"block"},ie={value:null},ce=["value"],me={class:"block mt-4"},ue={value:null},pe={value:"with"},he={value:"only"},_e={class:"bg-gray-50 dark:bg-black/50 border-b dark:border-gray-700 sm:rounded-b-lg"},fe={key:0},xe={class:"flex flex-col"},ge={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},ye={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},be={class:"relative overflow-hidden ring-1 ring-black ring-opacity-5"},ve={key:0,class:"absolute top-0 left-12 flex h-12 items-center space-x-3 sm:left-16"},we={key:0,class:"mt-2 text-red-500"},ke={class:"min-w-full table-fixed divide-y divide-gray-300 dark:divide-gray-700"},$e={class:"bg-gray-50 dark:bg-black/50"},Ve={scope:"col",class:"relative w-12 px-6 sm:w-16 sm:px-8"},Ce=["indeterminate","checked"],Se={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Te={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ne={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ue={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},De={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Fe={scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Re={class:"sr-only"},je={class:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900"},Ae={class:"relative w-12 px-6 sm:w-16 sm:px-8"},Be={key:0,class:"absolute inset-y-0 left-0 w-0.5 bg-blue-600"},Me=["value"],Pe={class:"whitespace-nowrap py-4 px-3 text-sm font-medium"},ze={class:"focus:outline-none flex items-center focus:text-indigo-500"},Ie=["src"],Le={class:"whitespace-nowrap px-3 py-4 text-sm"},Ee={class:"whitespace-nowrap px-3 py-4 text-sm"},Oe={class:"whitespace-nowrap px-3 py-4 text-sm text-center"},We={class:"whitespace-nowrap px-3 py-4 text-sm text-center"},qe={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 w-20"},Ye={key:1,class:"py-4 px-6"},nt={__name:"List",props:["users","roles"],setup(b){const{t:l}=M({}),x=P(!1),c=b,n=C({selection:[],force:!1}),d=C({search:"",trashed:null,role:null}),k=z(()=>n.selection.length>0&&n.selection.length<c.users.data.length);I(()=>{const i=window.location.search,o=new URLSearchParams(i);d.role=o.has("role")?o.get("role"):null,d.trashed=o.has("trashed")?o.get("trashed"):null});const R=(i,o=!1)=>{N.delete(f("users.destroy"+(o?".permanently":""),i))},j=i=>{N.put(f("users.restore",i))},$=()=>{x.value=!1},V=i=>{n.force=i||!1,x.value=!0},A=i=>{n.delete(f("users.destroy.many"),{onSuccess:()=>{n.reset()},onFinish:()=>{x.value=!1}})},v=()=>{d.transform(i=>{let o={...i,remember:i.remember?"on":""};return Object.entries(o).reduce((g,[s,h])=>(h&&(g[s]=h),g),{})}).get(f("users.index"),{preserveState:!0})},B=()=>{d.search="",d.trashed=null,v()};return(i,o)=>{const g=F("icons");return r(),w(Y,{title:e(l)("List Users")},{default:p(()=>[t("div",Z,[t("div",ee,[t("div",te,[t("div",se,[t("div",oe,[t("div",null,[t("div",le,[_(a(e(l)("Users"))+" ",1),t("span",ae,a(e(d).role?"("+e(d).role+")":"")+" "+a({with:"("+e(l)("With Trashed")+")",only:"("+e(l)("Only Trashed")+")"}[e(d).trashed]),1)]),t("div",re,a(e(l)("Please review the result below")),1)]),t("div",ne,[m(q,{href:e(f)("users.create")},{default:p(()=>[_(a(e(l)("Add New User")),1)]),_:1},8,["href"]),t("form",{onSubmit:L(v,["prevent"])},[m(G,{onReset:o[4]||(o[4]=s=>B()),modelValue:e(d).search,"onUpdate:modelValue":o[5]||(o[5]=s=>e(d).search=s)},{default:p(()=>[t("label",de,a(e(l)("Role"))+":",1),m(U,{modelValue:e(d).role,"onUpdate:modelValue":o[0]||(o[0]=s=>e(d).role=s),onChange:o[1]||(o[1]=s=>v()),class:"mt-1 w-full"},{default:p(()=>[t("option",ie,a(e(l)("All")),1),(r(!0),u(T,null,S(b.roles,s=>(r(),u("option",{key:s,value:s.name},a(e(l)(s.name)),9,ce))),128))]),_:1},8,["modelValue"]),t("label",me,a(e(l)("Trashed"))+":",1),m(U,{modelValue:e(d).trashed,"onUpdate:modelValue":o[2]||(o[2]=s=>e(d).trashed=s),onChange:o[3]||(o[3]=s=>v()),class:"mt-1 w-full"},{default:p(()=>[t("option",ue,a(e(l)("Not Trashed")),1),t("option",pe,a(e(l)("With Trashed")),1),t("option",he,a(e(l)("Only Trashed")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],32)])]),t("div",_e,[c.users&&c.users.data&&c.users.data.length?(r(),u("div",fe,[t("div",xe,[t("div",ge,[t("div",ye,[t("div",be,[e(n).selection&&e(n).selection.length?(r(),u("div",ve,[t("button",{type:"button",onClick:o[6]||(o[6]=s=>V()),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},a(e(l)("Move to Trash")),1),t("button",{type:"button",onClick:o[7]||(o[7]=s=>V(!0)),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},a(e(l)("Delete Permanently")),1),m(K,{show:x.value,onClose:$,maxWidth:"sm"},{title:p(()=>[_(a(e(l)("Delete bulk records")),1)]),content:p(()=>[t("p",null,a(e(l)("Please confirm that you would like to delete the records?")),1),e(n).force?(r(),u("p",we,a(e(l)("This action will delete the data permanently.")),1)):y("",!0)]),footer:p(()=>[m(X,{onClick:$},{default:p(()=>[_(a(e(l)("Cancel")),1)]),_:1}),m(Q,{onClick:o[8]||(o[8]=s=>A())},{default:p(()=>[_(a(e(l)("Yes, delete")),1)]),_:1})]),_:1},8,["show"])])):y("",!0),t("table",ke,[t("thead",$e,[t("tr",null,[t("th",Ve,[t("input",{type:"checkbox",indeterminate:k.value,checked:k.value||e(n).selection.length===c.users.data.length,onChange:o[9]||(o[9]=s=>e(n).selection=s.target.checked?c.users.data.map(h=>h.id):[]),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,40,Ce)]),t("th",Se,a(e(l)("Name")),1),t("th",Te,a(e(l)("Email")),1),t("th",Ne,a(e(l)("Roles")),1),t("th",Ue,a(e(l)("View All")),1),t("th",De,a(e(l)("Edit All")),1),t("th",Fe,[t("span",Re,a(e(l)("Actions")),1)])])]),t("tbody",je,[(r(!0),u(T,null,S(c.users.data,s=>(r(),u("tr",{key:s.id,class:E([e(n).selection.includes(s.id)&&"bg-gray-50 dark:bg-gray-800/50",s.deleted_at&&"bg-red-100 dark:bg-red-900"])},[t("td",Ae,[e(n).selection.includes(s.id)?(r(),u("div",Be)):y("",!0),O(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":o[10]||(o[10]=h=>e(n).selection=h),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,8,Me),[[W,e(n).selection]])]),t("td",Pe,[t("div",ze,[s.photo?(r(),u("img",{key:0,class:"block w-5 h-5 rounded-full mr-2 -my-2",src:s.photo},null,8,Ie)):y("",!0),_(" "+a(s.name)+" ",1),s.two_factor_enabled?(r(),w(g,{key:1,name:"otp",class:"shrink-0 text-blue-600 ml-2"})):y("",!0)])]),t("td",Le,a(s.email),1),t("td",Ee,a(s.roles?s.roles.map(h=>e(l)(i.$capitalize(h.name))).join(", "):""),1),t("td",Oe,[m(D,{value:s.view_all},null,8,["value"])]),t("td",We,[m(D,{value:s.edit_all},null,8,["value"])]),t("td",qe,[m(J,{pm:"users",row:s,property:"name",deleteFn:R,restoreFn:j,editStr:e(f)("users.edit",s.id)},null,8,["row","editStr"])])],2))),128))])])])])]),m(H,{class:"m-4",meta:c.users.meta,links:c.users.links},null,8,["meta","links"])])])):(r(),u("div",Ye,a(e(l)("There is no data to display.")),1))])])])])])]),_:1},8,["title"])}}};export{nt as default};
