import{D as R,E as z,i as W,d as w,T as F,j as E,k as J,p as Y,c as G,w as u,u as e,o as m,a as t,g as b,t as s,b as i,m as _,l as H,e as g,f as C,F as T,h as V,n as K,v as X,x as Z,y as L}from"./app-DvcEWBb-.js";import{_ as tt}from"./Button-C8m032_K.js";import{_ as et}from"./Modal-B8qV30f2.js";import{J as st}from"./JsBarcode-aMoV0t29.js";import{_ as ot}from"./AppLayout-BuCQ6WFQ.js";import{_ as at,a as rt}from"./SearchFilter-SpN_1X05.js";import{S as lt,_ as nt}from"./SelectInput-Dachf9ko.js";import{_ as dt}from"./DialogModal-CF240EeB.js";import{_ as it}from"./DangerButton-71d8Iw8G.js";import{_ as ct}from"./SecondaryButton-DsJqz4h9.js";import"./LoadingButton-BDuquHI2.js";import"./Button-CqSGXcNL.js";import"./Label-Vj9Pqrhi.js";import"./InputError-CKMLs-tu.js";import"./v4-CQkTLCs1.js";const A=R({name:"Barcode",props:{value:{type:String,default:void 0},options:{type:Object,default:void 0},tag:{type:String,default:"canvas"}},watch:{$props:{deep:!0,immediate:!0,handler(){this.$el&&this.generate()}}},mounted(){this.generate()},methods:{generate(){st(this.$el,String(this.value),this.options)}},render(){return z(this.tag,this.$slots.default)}}),mt={class:"contents"},ut={class:"py-8"},gt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},pt={class:"bg-white dark:bg-gray-900 shadow sm:rounded-lg"},ht={class:"sm:rounded-lg"},yt={class:"p-6 sm:rounded-t-lg border-b border-gray-200 dark:border-gray-700 block md:flex md:items-center md:justify-between"},xt={class:"text-2xl"},_t={class:"text-base"},ft={class:"mt-1 text-gray-500 dark:text-gray-400"},bt={class:"mt-4 sm:mt-0 block sm:flex sm:items-center sm:gap-4"},vt={class:"block"},kt={value:null},wt={value:"with"},Ct={value:"only"},$t={class:"bg-gray-50 dark:bg-black/50 border-b dark:border-gray-700 sm:rounded-b-lg"},St={key:0},Tt={class:"flex flex-col"},Vt={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Dt={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},jt={class:"relative overflow-hidden ring-1 ring-black ring-opacity-5"},Nt={key:0,class:"absolute top-0 left-12 flex h-12 items-center space-x-3 sm:left-16"},qt={key:0,class:"mt-2 text-red-500"},Bt={class:"min-w-full table-fixed divide-y divide-gray-300 dark:divide-gray-700"},Mt={class:"bg-gray-50 dark:bg-black/50"},Ft={scope:"col",class:"relative w-12 px-6 sm:w-16 sm:px-8"},Lt=["indeterminate","checked"],At={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},It={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Pt={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ut={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ot={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Qt={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Rt={scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},zt={class:"sr-only"},Wt={class:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900"},Et={class:"relative w-12 px-6 sm:w-16 sm:px-8"},Jt={key:0,class:"absolute inset-y-0 left-0 w-0.5 bg-blue-600"},Yt=["value"],Gt=["onClick"],Ht=["onClick"],Kt=["onClick"],Xt=["onClick"],Zt=["onClick"],te=["onClick"],ee={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 w-20"},se={key:1,class:"py-4 px-6"},oe={class:"relative print:static print:w-full"},ae={class:"absolute print:hidden top-0 right-0 hidden py-1.5 px-2 sm:flex sm:items-center sm:justify-center border-l border-b dark:border-gray-700 rounded-bl-lg hover:bg-gray-700 dark:hover:bg-gray-900 hover:text-gray-100 dark:hover:text-gray-100"},re={class:"sr-only"},le={class:"p-6 sm:flex print:hidden"},ne={class:"w-full text-center"},de={class:"text-lg font-bold leading-6 text-gray-900 dark:text-gray-100",id:"modal-title"},ie=["src"],ce={class:"mt-4 border dark:border-gray-700 rounded-md overflow-hidden text-left"},me={class:"bg-white dark:bg-gray-900 px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 print:grid print:grid-cols-3"},ue={class:"text-sm text-gray-500"},ge={class:"mt-1 text-sm text-gray-900 dark:text-gray-100 sm:col-span-2 sm:mt-0"},pe={class:"bg-gray-50 dark:bg-gray-900/50 px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 print:grid print:grid-cols-3"},he={class:"text-sm text-gray-500"},ye={class:"mt-1 text-sm text-gray-900 dark:text-gray-100 sm:col-span-2 sm:mt-0"},xe={class:"bg-white dark:bg-gray-900 px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 print:grid print:grid-cols-3"},_e={class:"text-sm text-gray-500"},fe={class:"mt-1 text-sm text-gray-900 dark:text-gray-100 sm:col-span-2 sm:mt-0"},be={class:"hidden print:block print:w-full print:-mt-2"},ve={class:"table-fixed print:w-full"},ke={class:"w-full text-center border rounded-md p-4"},we={class:"text-lg font-bold leading-6 text-gray-900 dark:text-gray-100",id:"modal-title"},Ce={class:"mt-2 overflow-hidden text-left"},$e={class:"bg-white dark:bg-gray-900 px-2 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 print:grid print:grid-cols-3"},Se={class:"text-sm text-gray-500"},Te={class:"text-sm text-gray-900 dark:text-gray-100 sm:col-span-2 print:col-span-2 sm:mt-0"},Ve={class:"bg-gray-50 dark:bg-gray-900/50 px-2 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 print:grid print:grid-cols-3"},De={class:"text-sm text-gray-500"},je={class:"text-sm text-gray-900 dark:text-gray-100 sm:col-span-2 print:col-span-2 sm:mt-0"},Ne={class:"bg-white dark:bg-gray-900 px-2 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 print:grid print:grid-cols-3"},qe={class:"text-sm text-gray-500"},Be={class:"text-sm text-gray-900 dark:text-gray-100 sm:col-span-2 print:col-span-2 sm:mt-0"},Ge={__name:"List",props:["items"],setup(y){const{t:r}=W({}),D=w(null),$=w(!1),l=w(null),v=w(!1),k=y,d=F({selection:[],force:!1}),p=F({search:"",trashed:null}),j=E(()=>d.selection.length>0&&d.selection.length<k.items.data.length);J(()=>{const n=window.location.search,a=new URLSearchParams(n);D.value=a.has("alerts")?a.get("alerts"):null,p.trashed=a.has("trashed")?a.get("trashed"):null});const I=(n,a=!1)=>{L.delete(_("items.destroy"+(a?".permanently":""),n))},P=n=>{L.put(_("items.restore",n))},x=n=>{l.value=n,$.value=!0},N=()=>{$.value=!1,l.value=null},q=()=>{v.value=!1},B=n=>{d.force=n||!1,v.value=!0},U=n=>{d.delete(_("items.destroy.many"),{onSuccess:()=>{d.reset()},onFinish:()=>{v.value=!1}})},S=()=>{p.transform(n=>{let a={...n,remember:n.remember?"on":""};return Object.entries(a).reduce((f,[o,c])=>(c&&(f[o]=c),f),{})}).get(_("items.index"),{preserveState:!0})},O=()=>{p.search="",p.trashed=null,S()},Q=()=>{window.print()};return(n,a)=>{const f=Y("icons");return m(),G(ot,{title:e(r)("List Items")},{default:u(()=>[t("div",mt,[t("div",ut,[t("div",gt,[t("div",pt,[t("div",ht,[t("div",yt,[t("div",null,[t("div",xt,[b(s(e(r)("Items"))+" ",1),t("span",_t,s(D.value=="yes"?"("+e(r)("Low Stock")+")":"")+" "+s({with:"("+e(r)("With Trashed")+")",only:"("+e(r)("Only Trashed")+")"}[e(p).trashed]),1)]),t("div",ft,s(e(r)("Please review the result below")),1)]),t("div",bt,[i(tt,{href:e(_)("items.create")},{default:u(()=>[b(s(e(r)("Add New Item")),1)]),_:1},8,["href"]),t("form",{onSubmit:H(S,["prevent"])},[i(at,{onReset:a[2]||(a[2]=o=>O()),modelValue:e(p).search,"onUpdate:modelValue":a[3]||(a[3]=o=>e(p).search=o)},{default:u(()=>[t("label",vt,s(e(r)("Trashed"))+":",1),i(lt,{modelValue:e(p).trashed,"onUpdate:modelValue":a[0]||(a[0]=o=>e(p).trashed=o),onChange:a[1]||(a[1]=o=>S()),class:"mt-1 w-full"},{default:u(()=>[t("option",kt,s(e(r)("Not Trashed")),1),t("option",wt,s(e(r)("With Trashed")),1),t("option",Ct,s(e(r)("Only Trashed")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],32)])]),t("div",$t,[y.items&&y.items.data&&y.items.data.length?(m(),g("div",St,[t("div",Tt,[t("div",Vt,[t("div",Dt,[t("div",jt,[e(d).selection&&e(d).selection.length?(m(),g("div",Nt,[t("button",{type:"button",onClick:a[4]||(a[4]=o=>B()),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},s(e(r)("Move to Trash")),1),t("button",{type:"button",onClick:a[5]||(a[5]=o=>B(!0)),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},s(e(r)("Delete Permanently")),1),i(dt,{show:v.value,onClose:q,maxWidth:"sm"},{title:u(()=>[b(s(e(r)("Delete bulk records")),1)]),content:u(()=>[t("p",null,s(e(r)("Please confirm that you would like to delete the records?")),1),e(d).force?(m(),g("p",qt,s(e(r)("This action will delete the data permanently.")),1)):C("",!0)]),footer:u(()=>[i(ct,{onClick:q},{default:u(()=>[b(s(e(r)("Cancel")),1)]),_:1}),i(it,{onClick:a[6]||(a[6]=o=>U())},{default:u(()=>[b(s(e(r)("Yes, delete")),1)]),_:1})]),_:1},8,["show"])])):C("",!0),t("table",Bt,[t("thead",Mt,[t("tr",null,[t("th",Ft,[t("input",{type:"checkbox",indeterminate:j.value,checked:j.value||e(d).selection.length===y.items.data.length,onChange:a[7]||(a[7]=o=>e(d).selection=o.target.checked?y.items.data.map(c=>c.id):[]),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,40,Lt)]),t("th",At,s(e(r)("Code")),1),t("th",It,s(e(r)("Name")),1),t("th",Pt,s(e(r)("Category")),1),t("th",Ut,s(e(r)("Quantity")),1),t("th",Ot,s(e(r)("Unit")),1),t("th",Qt,s(e(r)("Alert Quantity")),1),t("th",Rt,[t("span",zt,s(e(r)("Actions")),1)])])]),t("tbody",Wt,[(m(!0),g(T,null,V(k.items.data,o=>{var c;return m(),g("tr",{key:o.id,class:K([e(d).selection.includes(o.id)&&"bg-gray-50 dark:bg-gray-800/50",o.deleted_at&&"bg-red-100 dark:bg-red-900"])},[t("td",Et,[e(d).selection.includes(o.id)?(m(),g("div",Jt)):C("",!0),X(t("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":a[8]||(a[8]=h=>e(d).selection=h),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,8,Yt),[[Z,e(d).selection]])]),t("td",{onClick:h=>x(o),class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm font-medium"},s(o.code),9,Gt),t("td",{onClick:h=>x(o),class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm"},s(o.name),9,Ht),t("td",{onClick:h=>x(o),class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm"},s(((c=o.category)==null?void 0:c.name)||""),9,Kt),t("td",{onClick:h=>x(o),class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-right w-28"},s(n.$number(o.quantity)),9,Xt),t("td",{onClick:h=>x(o),class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm"},s(o.unit),9,Zt),t("td",{onClick:h=>x(o),class:"whitespace-nowrap cursor-pointer px-3 py-4 text-sm text-right w-32"},s(n.$number(o.alert_quantity)),9,te),t("td",ee,[i(nt,{pm:"items",row:o,property:"name",deleteFn:I,restoreFn:P,editStr:e(_)("items.edit",o.id)},null,8,["row","editStr"])])],2)}),128))])])])])]),i(rt,{class:"m-4",meta:k.items.meta,links:k.items.links},null,8,["meta","links"])])])):(m(),g("div",se,s(e(r)("There is no data to display.")),1))])])])])])]),i(et,{show:$.value,"max-width":"sm",onClose:a[11]||(a[11]=o=>N())},{default:u(()=>{var o;return[t("div",oe,[t("div",ae,[t("button",{onClick:a[9]||(a[9]=c=>Q()),class:"flex items-center justify-center h-8 w-8 mr-2 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700 focus:outline-none"},[i(f,{name:"printer",class:"h-5 w-5"})]),t("button",{type:"button",onClick:a[10]||(a[10]=c=>N()),class:"rounded-md focus:outline-none focus:ring-0"},[t("span",re,s(e(r)("Close")),1),a[12]||(a[12]=t("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1))])]),t("div",le,[t("div",ne,[t("h3",de,s(l.value.name),1),i(A,{tag:"svg",value:l.value.code,options:{format:l.value.symbology,height:38,fontSize:14},class:"mt-4 mx-auto border rounded-md overflow-hidden text-left bg-white"},null,8,["value","options"]),l.value.photo?(m(),g("img",{key:0,src:l.value.photo,class:"block my-4 max-w-full max-h-full rounded-md border dark:border-gray-700"},null,8,ie)):C("",!0),t("div",ce,[t("dl",null,[t("div",me,[t("dt",ue,s(e(r)("Category")),1),t("dd",ge,s(((o=l.value.category)==null?void 0:o.name)||""),1)]),t("div",pe,[t("dt",he,s(e(r)("Quantity")),1),t("dd",ye,s(l.value.quantity)+" "+s(l.value.unit),1)]),t("div",xe,[t("dt",_e,s(e(r)("Alert on")),1),t("dd",fe,s(l.value.alert_quantity)+" "+s(l.value.unit),1)])])])])]),t("div",be,[t("table",ve,[(m(),g(T,null,V([0,1,2,3],c=>t("tr",{key:c},[(m(),g(T,null,V([0,1],h=>{var M;return t("td",{key:h,class:"w-1/2 p-2"},[t("div",ke,[t("h3",we,s(l.value.name),1),i(A,{tag:"svg",value:l.value.code,options:{format:l.value.symbology,height:38,fontSize:14},class:"mt-2 mx-auto rounded-md overflow-hidden text-left bg-white"},null,8,["value","options"]),t("div",Ce,[t("dl",null,[t("div",$e,[t("dt",Se,s(e(r)("Category")),1),t("dd",Te," : "+s(((M=l.value.category)==null?void 0:M.name)||""),1)]),t("div",Ve,[t("dt",De,s(e(r)("Quantity")),1),t("dd",je," : "+s(l.value.quantity)+" "+s(l.value.unit),1)]),t("div",Ne,[t("dt",qe,s(e(r)("Alert on")),1),t("dd",Be," : "+s(l.value.alert_quantity)+" "+s(l.value.unit),1)])])])])])}),64))])),64))])])])]}),_:1},8,["show"])]),_:1},8,["title"])}}};export{Ge as default};
