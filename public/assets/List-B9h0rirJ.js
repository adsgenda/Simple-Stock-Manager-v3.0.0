import{i as F,d as M,T as $,j as P,k as j,c as C,w as m,u as e,o as n,a as t,g as f,t as r,b as h,m as p,l as B,e as u,f as b,F as L,h as U,n as O,v as W,x as A,y as S}from"./app-DvcEWBb-.js";import{_ as I}from"./Button-C8m032_K.js";import{_ as q}from"./AppLayout-BuCQ6WFQ.js";import{_ as z,a as E}from"./SearchFilter-SpN_1X05.js";import{S as Y,_ as G}from"./SelectInput-Dachf9ko.js";import{_ as H}from"./DialogModal-CF240EeB.js";import{_ as J}from"./DangerButton-71d8Iw8G.js";import{_ as K}from"./SecondaryButton-DsJqz4h9.js";import"./LoadingButton-BDuquHI2.js";import"./Modal-B8qV30f2.js";import"./Button-CqSGXcNL.js";import"./Label-Vj9Pqrhi.js";import"./InputError-CKMLs-tu.js";import"./v4-CQkTLCs1.js";const Q={class:"py-8"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white dark:bg-gray-900 shadow sm:rounded-lg"},ee={class:"sm:rounded-lg"},te={class:"p-6 sm:rounded-t-lg border-b border-gray-200 dark:border-gray-700 block md:flex md:items-center md:justify-between"},se={class:"text-2xl"},oe={class:"text-base"},le={class:"mt-1 text-gray-500 dark:text-gray-400"},re={class:"mt-4 sm:mt-0 block sm:flex sm:items-center sm:gap-4"},ae={class:"block mt-4"},de={value:null},ne={value:"with"},ie={value:"only"},ce={class:"bg-gray-50 dark:bg-black/50 border-b dark:border-gray-700 sm:rounded-b-lg"},me={key:0},ue={class:"flex flex-col"},he={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},pe={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},_e={class:"relative overflow-hidden ring-1 ring-black ring-opacity-5"},fe={key:0,class:"absolute top-0 left-12 flex h-12 items-center space-x-3 sm:left-16"},be={key:0,class:"mt-2 text-red-500"},ge={class:"min-w-full table-fixed divide-y divide-gray-300 dark:divide-gray-700"},ye={class:"bg-gray-50 dark:bg-black/50"},xe={scope:"col",class:"relative w-12 px-6 sm:w-16 sm:px-8"},ve=["indeterminate","checked"],ke={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},we={scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},$e={class:"sr-only"},Ce={class:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900"},Se={class:"relative w-12 px-6 sm:w-16 sm:px-8"},Te={key:0,class:"absolute inset-y-0 left-0 w-0.5 bg-blue-600"},Ve=["value"],Ne={class:"whitespace-nowrap py-4 pr-3 text-sm font-medium"},Re={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 w-20"},De={key:1,class:"py-4 px-6"},Ye={__name:"List",props:["roles","roles"],setup(T){const{t:l}=F({}),g=M(!1),i=T,a=$({selection:[],force:!1}),c=$({search:"",trashed:null}),x=P(()=>a.selection.length>0&&a.selection.length<i.roles.data.length);j(()=>{const d=window.location.search,s=new URLSearchParams(d);c.trashed=s.has("trashed")?s.get("trashed"):null});const V=(d,s=!1)=>{S.delete(p("roles.destroy"+(s?".permanently":""),d))},N=d=>{S.put(p("roles.restore",d))},v=()=>{g.value=!1},k=d=>{a.force=d||!1,g.value=!0},R=d=>{a.delete(p("roles.destroy.many"),{onSuccess:()=>{a.reset()},onFinish:()=>{g.value=!1}})},y=()=>{c.transform(d=>{let s={...d,remember:d.remember?"on":""};return Object.entries(s).reduce((o,[_,w])=>(w&&(o[_]=w),o),{})}).get(p("roles.index"),{preserveState:!0})},D=()=>{c.search="",c.trashed=null,y()};return(d,s)=>(n(),C(q,{title:e(l)("List Roles")},{default:m(()=>[t("div",Q,[t("div",X,[t("div",Z,[t("div",ee,[t("div",te,[t("div",null,[t("div",se,[f(r(e(l)("Roles"))+" ",1),t("span",oe,r({with:"("+e(l)("With Trashed")+")",only:"("+e(l)("Only Trashed")+")"}[e(c).trashed]),1)]),t("div",le,r(e(l)("Please review the result below")),1)]),t("div",re,[h(I,{href:e(p)("roles.create")},{default:m(()=>[f(r(e(l)("Add New Role")),1)]),_:1},8,["href"]),t("form",{onSubmit:B(y,["prevent"])},[h(z,{onReset:s[2]||(s[2]=o=>D()),modelValue:e(c).search,"onUpdate:modelValue":s[3]||(s[3]=o=>e(c).search=o)},{default:m(()=>[t("label",ae,r(e(l)("Trashed"))+":",1),h(Y,{modelValue:e(c).trashed,"onUpdate:modelValue":s[0]||(s[0]=o=>e(c).trashed=o),onChange:s[1]||(s[1]=o=>y()),class:"mt-1 w-full"},{default:m(()=>[t("option",de,r(e(l)("Not Trashed")),1),t("option",ne,r(e(l)("With Trashed")),1),t("option",ie,r(e(l)("Only Trashed")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],32)])]),t("div",ce,[i.roles&&i.roles.data&&i.roles.data.length?(n(),u("div",me,[t("div",ue,[t("div",he,[t("div",pe,[t("div",_e,[e(a).selection&&e(a).selection.length?(n(),u("div",fe,[t("button",{type:"button",onClick:s[4]||(s[4]=o=>k()),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},r(e(l)("Move to Trash")),1),t("button",{type:"button",onClick:s[5]||(s[5]=o=>k(!0)),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},r(e(l)("Delete Permanently")),1),h(H,{show:g.value,onClose:v,maxWidth:"sm"},{title:m(()=>[f(r(e(l)("Delete bulk records")),1)]),content:m(()=>[t("p",null,r(e(l)("Please confirm that you would like to delete the records?")),1),e(a).force?(n(),u("p",be,r(e(l)("This action will delete the data permanently.")),1)):b("",!0)]),footer:m(()=>[h(K,{onClick:v},{default:m(()=>[f(r(e(l)("Cancel")),1)]),_:1}),h(J,{onClick:s[6]||(s[6]=o=>R())},{default:m(()=>[f(r(e(l)("Yes, delete")),1)]),_:1})]),_:1},8,["show"])])):b("",!0),t("table",ge,[t("thead",ye,[t("tr",null,[t("th",xe,[t("input",{type:"checkbox",indeterminate:x.value,checked:x.value||e(a).selection.length===i.roles.data.length,onChange:s[7]||(s[7]=o=>e(a).selection=o.target.checked?i.roles.data.map(_=>_.id):[]),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,40,ve)]),t("th",ke,r(e(l)("Name")),1),t("th",we,[t("span",$e,r(e(l)("Actions")),1)])])]),t("tbody",Ce,[(n(!0),u(L,null,U(i.roles.data,o=>(n(),u("tr",{key:o.id,class:O([e(a).selection.includes(o.id)&&"bg-gray-50 dark:bg-gray-800/50",o.deleted_at&&"bg-red-100 dark:bg-red-900"])},[t("td",Se,[e(a).selection.includes(o.id)?(n(),u("div",Te)):b("",!0),o.name!="owner"?W((n(),u("input",{key:1,type:"checkbox",value:o.id,"onUpdate:modelValue":s[8]||(s[8]=_=>e(a).selection=_),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,8,Ve)),[[A,e(a).selection]]):b("",!0)]),t("td",Ne,r(o.name),1),t("td",Re,[o.name!="admin"?(n(),C(G,{key:0,pm:"roles",row:o,property:"name",deleteFn:V,restoreFn:N,editStr:e(p)("roles.edit",o.id)},null,8,["row","editStr"])):b("",!0)])],2))),128))])])])])]),h(E,{class:"m-4",meta:i.roles.meta,links:i.roles.links},null,8,["meta","links"])])])):(n(),u("div",De,r(e(l)("There is no data to display.")),1))])])])])])]),_:1},8,["title"]))}};export{Ye as default};
