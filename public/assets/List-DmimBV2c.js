import{i as W,d as V,T as N,j as A,k as E,p as B,c as S,w as u,u as t,o as c,a as e,g as x,t as a,b as i,m as _,l as q,e as h,f,F as Y,h as G,n as H,v as J,x as K,y as F}from"./app-DvcEWBb-.js";import Q from"./Details-BRkUGFqK.js";import{_ as X}from"./Button-C8m032_K.js";import{_ as Z}from"./Modal-B8qV30f2.js";import{_ as L}from"./TextInput-ujQ4NiUK.js";import{_ as ee}from"./AppLayout-BuCQ6WFQ.js";import{_ as te,a as se}from"./SearchFilter-SpN_1X05.js";import{S as oe,_ as ae}from"./SelectInput-Dachf9ko.js";import{_ as re}from"./DialogModal-CF240EeB.js";import{_ as ne}from"./DangerButton-71d8Iw8G.js";import{_ as le}from"./SecondaryButton-DsJqz4h9.js";import"./JsBarcode-aMoV0t29.js";import"./Attachments-jmVqfhCB.js";import"./LoadingButton-BDuquHI2.js";import"./Label-Vj9Pqrhi.js";import"./Input-CR1qtmG5.js";import"./InputError-CKMLs-tu.js";import"./v4-CQkTLCs1.js";import"./Button-CqSGXcNL.js";const de={class:"contents"},ie={class:"py-8"},ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ue={class:"bg-white dark:bg-gray-900 shadow sm:rounded-lg"},me={class:"sm:rounded-lg"},he={class:"p-6 sm:rounded-t-lg border-b border-gray-200 dark:border-gray-700 block md:flex md:items-center md:justify-between"},pe={class:"text-2xl"},ge={class:"text-base"},_e={class:"mt-1 text-gray-500 dark:text-gray-400"},fe={class:"mt-4 sm:mt-0 block sm:flex sm:items-center sm:gap-4"},ye={class:"block"},xe={class:"block"},ke={class:"block"},be={value:null},ve={value:"with"},we={value:"only"},Ce={class:"bg-gray-50 dark:bg-black/50 border-b dark:border-gray-700 sm:rounded-b-lg"},$e={key:0},Ve={class:"flex flex-col"},Se={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},je={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Te={class:"relative overflow-hidden ring-1 ring-black ring-opacity-5"},De={key:0,class:"absolute top-0 left-12 flex h-12 items-center space-x-3 sm:left-16"},Me={key:0,class:"mt-2 text-red-500"},Ne={class:"min-w-full table-fixed divide-y divide-gray-300 dark:divide-gray-700"},Be={class:"bg-gray-50 dark:bg-black/50"},Fe={scope:"col",class:"relative w-12 px-6 sm:w-16 sm:px-8"},Le=["indeterminate","checked"],Ue={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Pe={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Re={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},ze={scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100"},Ie={scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Oe={class:"sr-only"},We={class:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900"},Ae={class:"relative w-12 px-6 sm:w-16 sm:px-8"},Ee={key:0,class:"absolute inset-y-0 left-0 w-0.5 bg-blue-600"},qe=["value"],Ye=["onClick"],Ge=["onClick"],He=["onClick"],Je=["onClick"],Ke={class:"whitespace-nowrap px-3 py-4 text-sm w-12"},Qe={class:"flex items-center justify-end gap-3 -my-1"},Xe=["href"],Ze=["onClick"],et={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 w-20"},tt={key:1,class:"py-4 px-6"},st={class:"px-6 pt-3 pb-6 print:px-0 bg-gray-100 dark:bg-gray-800"},ot={key:0,class:"flex items-center justify-between print:hidden"},at={class:"text-lg"},rt={class:"hidden sm:inline"},nt={class:"-mr-2 flex items- gap-2"},lt={class:""},St={__name:"List",props:["checkins"],setup(U){const{t:r}=W({}),v=V(!1),p=V(null),w=V(!1),m=U,d=N({selection:[],force:!1}),n=N({search:"",start_date:null,end_date:null,trashed:null}),j=A(()=>d.selection.length>0&&d.selection.length<m.checkins.data.length);E(()=>{const l=window.location.search,s=new URLSearchParams(l);n.trashed=s.has("trashed")?s.get("trashed"):null,n.end_date=s.has("end_date")?s.get("end_date"):null,n.start_date=s.has("start_date")?s.get("start_date"):null});const P=()=>{window.print()},R=(l,s=!1)=>{F.delete(_("checkins.destroy"+(s?".permanently":""),l))},z=l=>{F.put(_("checkins.restore",l))},T=()=>{w.value=!1},k=l=>{v.value=!0,p.value=l},D=l=>{v.value=!1,p.value=null},M=l=>{d.force=l||!1,w.value=!0},I=l=>{d.delete(_("checkins.destroy.many"),{onSuccess:()=>{d.reset()},onFinish:()=>{w.value=!1}})},b=()=>{n.transform(l=>{let s={...l,remember:l.remember?"on":""};return Object.entries(s).reduce((g,[$,o])=>(o&&(g[$]=o),g),{})}).get(_("checkins.index"),{preserveState:!0})},O=()=>{n.search="",n.trashed=null,b()};return(l,s)=>{const g=B("icons"),$=B("Link");return c(),S(ee,{title:t(r)("List Checkins")},{default:u(()=>[e("div",de,[e("div",ie,[e("div",ce,[e("div",ue,[e("div",me,[e("div",he,[e("div",null,[e("div",pe,[x(a(t(r)("Checkins"))+" ",1),e("span",ge,a(t(n).start_date?"(from: "+l.$date(t(n).start_date)+")":"")+" "+a(t(n).end_date?"(to: "+l.$date(t(n).end_date)+")":"")+" "+a({with:"("+t(r)("With Trashed")+")",only:"("+t(r)("Only Trashed")+")"}[t(n).trashed]),1)]),e("div",_e,a(t(r)("Please review the result below")),1)]),e("div",fe,[i(X,{href:t(_)("checkins.create")},{default:u(()=>[x(a(t(r)("Add New Checkin")),1)]),_:1},8,["href"]),e("form",{onSubmit:q(b,["prevent"])},[i(te,{onReset:s[6]||(s[6]=o=>O()),modelValue:t(n).search,"onUpdate:modelValue":s[7]||(s[7]=o=>t(n).search=o)},{default:u(()=>[e("label",ye,a(t(r)("Start Date"))+":",1),i(L,{type:"date",modelValue:t(n).start_date,"onUpdate:modelValue":s[0]||(s[0]=o=>t(n).start_date=o),onChange:s[1]||(s[1]=o=>b()),class:"mt-1 w-full mb-4"},null,8,["modelValue"]),e("label",xe,a(t(r)("End Date"))+":",1),i(L,{type:"date",modelValue:t(n).end_date,"onUpdate:modelValue":s[2]||(s[2]=o=>t(n).end_date=o),onChange:s[3]||(s[3]=o=>b()),class:"mt-1 w-full mb-4"},null,8,["modelValue"]),e("label",ke,a(t(r)("Trashed"))+":",1),i(oe,{modelValue:t(n).trashed,"onUpdate:modelValue":s[4]||(s[4]=o=>t(n).trashed=o),onChange:s[5]||(s[5]=o=>b()),class:"mt-1 w-full"},{default:u(()=>[e("option",be,a(t(r)("Not Trashed")),1),e("option",ve,a(t(r)("With Trashed")),1),e("option",we,a(t(r)("Only Trashed")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],32)])]),e("div",Ce,[m.checkins&&m.checkins.data&&m.checkins.data.length?(c(),h("div",$e,[e("div",Ve,[e("div",Se,[e("div",je,[e("div",Te,[t(d).selection&&t(d).selection.length?(c(),h("div",De,[e("button",{type:"button",onClick:s[8]||(s[8]=o=>M()),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},a(t(r)("Move to Trash")),1),e("button",{type:"button",onClick:s[9]||(s[9]=o=>M(!0)),class:"inline-flex items-center rounded border text-white border-red-500 bg-red-500 px-2.5 py-1.5 text-xs font-medium shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-30"},a(t(r)("Delete Permanently")),1),i(re,{show:w.value,onClose:T,maxWidth:"sm"},{title:u(()=>[x(a(t(r)("Delete bulk records")),1)]),content:u(()=>[e("p",null,a(t(r)("Please confirm that you would like to delete the records?")),1),t(d).force?(c(),h("p",Me,a(t(r)("This action will delete the data permanently.")),1)):f("",!0)]),footer:u(()=>[i(le,{onClick:T},{default:u(()=>[x(a(t(r)("Cancel")),1)]),_:1}),i(ne,{onClick:s[10]||(s[10]=o=>I())},{default:u(()=>[x(a(t(r)("Yes, delete")),1)]),_:1})]),_:1},8,["show"])])):f("",!0),e("table",Ne,[e("thead",Be,[e("tr",null,[e("th",Fe,[e("input",{type:"checkbox",indeterminate:j.value,checked:j.value||t(d).selection.length===m.checkins.data.length,onChange:s[11]||(s[11]=o=>t(d).selection=o.target.checked?m.checkins.data.map(C=>C.id):[]),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,40,Le)]),e("th",Ue,a(t(r)("Date")),1),e("th",Pe,a(t(r)("Reference")),1),e("th",Re,a(t(r)("Supplier")),1),e("th",ze,a(t(r)("Items")),1),s[15]||(s[15]=e("th",{scope:"col",class:"py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100 w-12"},null,-1)),e("th",Ie,[e("span",Oe,a(t(r)("Actions")),1)])])]),e("tbody",We,[(c(!0),h(Y,null,G(m.checkins.data,o=>{var C;return c(),h("tr",{key:o.id,class:H([t(d).selection.includes(o.id)&&"bg-gray-50 dark:bg-gray-800/50",o.deleted_at&&"bg-red-100 dark:bg-red-900"])},[e("td",Ae,[t(d).selection.includes(o.id)?(c(),h("div",Ee)):f("",!0),J(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":s[12]||(s[12]=y=>t(d).selection=y),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6 dark:bg-gray-700 dark:border-gray-700"},null,8,qe),[[K,t(d).selection]])]),e("td",{class:"whitespace-nowrap px-3 py-4 cursor-pointer text-sm font-medium",onClick:y=>k(o)},a(l.$date(o.date)),9,Ye),e("td",{class:"whitespace-nowrap px-3 py-4 cursor-pointer text-sm",onClick:y=>k(o)},a(o.reference),9,Ge),e("td",{class:"whitespace-nowrap px-3 py-4 cursor-pointer text-sm",onClick:y=>k(o)},a((C=o.supplier)==null?void 0:C.name),9,He),e("td",{class:"whitespace-nowrap px-3 py-4 cursor-pointer text-sm text-right w-20",onClick:y=>k(o)},a(o.items.length),9,Je),e("td",Ke,[e("div",Qe,[o.attachment?(c(),h("a",{key:0,href:o.attachment,target:"_blank",class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"},s[16]||(s[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})],-1)]),8,Xe)):f("",!0),e("button",{type:"button",onClick:y=>k(o),class:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"},s[17]||(s[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,Ze)])]),e("td",et,[i(ae,{pm:"checkins",row:o,property:"reference",deleteFn:R,restoreFn:z,editStr:t(_)("checkins.edit",o.id)},null,8,["row","editStr"])])],2)}),128))])])])])]),i(se,{class:"m-4",meta:m.checkins.meta,links:m.checkins.links},null,8,["meta","links"])])])):(c(),h("div",tt,a(t(r)("There is no data to display.")),1))])])])])])]),i(Z,{show:v.value,"max-width":"4xl",closeable:!0,onClose:D},{default:u(()=>[e("div",st,[v.value&&p.value?(c(),h("div",ot,[e("div",at,[x(a(t(r)("Checkin Details"))+" ",1),e("span",rt,"("+a(p.value.reference)+")",1)]),e("div",nt,[e("button",{onClick:s[13]||(s[13]=o=>P()),class:"flex items-center justify-center h-8 w-8 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700 focus:outline-none"},[i(g,{name:"printer",class:"h-5 w-5"})]),l.$can("update-checkins")?(c(),S($,{key:0,href:t(_)("checkins.edit",p.value.id),class:"flex items-center justify-center h-8 w-8 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700 focus:outline-none"},{default:u(()=>[i(g,{name:"edit",class:"h-5 w-5"})]),_:1},8,["href"])):f("",!0),e("button",{onClick:s[14]||(s[14]=o=>D()),class:"flex items-center justify-center h-8 w-8 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700 focus:outline-none"},[i(g,{name:"cross",class:"h-5 w-5"})])])])):f("",!0),e("div",lt,[p.value?(c(),S(Q,{key:0,checkin:p.value},null,8,["checkin"])):f("",!0)])])]),_:1},8,["show"])]),_:1},8,["title"])}}};export{St as default};
